const website_id=CONFIG.web_analytics.umami.website_id,request_url=`${CONFIG.web_analytics.umami.api_server}/websites/${website_id}/stats`,start_time=new Date(CONFIG.web_analytics.umami.start_time).getTime(),end_time=new Date().getTime(),token=CONFIG.web_analytics.umami.token;if(!website_id)throw new Error("Umami website_id is empty");if(!request_url)throw new Error("Umami request_url is empty");if(!start_time)throw new Error("Umami start_time is empty");if(!token)throw new Error("Umami token is empty");const params=new URLSearchParams({startAt:start_time,endAt:end_time}),request_header={method:"GET",headers:{"Content-Type":"application/json","x-umami-api-key":"oZKCH3msvqt10VlXKwoJvHclmaS4bVx0"}};async function siteStats(){try{const e=await(await fetch(`${request_url}?${params}`,request_header)).json(),r=e.uniques.value,s=e.pageviews.value;let i=document.querySelector("#umami-site-pv-container");if(i){let n=document.querySelector("#umami-site-pv");n&&(n.textContent=s,i.style.display="inline")}let a=document.querySelector("#umami-site-uv-container");if(a){let n=document.querySelector("#umami-site-uv");n&&(n.textContent=r,a.style.display="inline")}}catch(t){return console.error(t),"-1"}}async function pageStats(t){try{const s=(await(await fetch(`${request_url}?${params}&url=${t}`,request_header)).json()).pageviews.value;let i=document.querySelector("#umami-page-views-container");if(i){let a=document.querySelector("#umami-page-views");a&&(a.textContent=s,i.style.display="inline")}}catch(e){return console.error(e),"-1"}}siteStats();let viewCtn=document.querySelector("#umami-page-views-container");if(viewCtn){let t=window.location.pathname,e=decodeURI(t.replace(/\/*(index.html)?$/,"/"));pageStats(e)}
